import{r as m,u as _,o as N,l as k,g as l,j as i,k as e,I as S,D as v,E as x,f as h,A as w,B as c,m as y,t as j,F as B}from"./index-48699524.js";import{g as T,i as D}from"./axios-instance-98f3073b.js";import{S as F,s as V}from"./API-2a418714.js";import{u as C}from"./tokenStore-a3ec96d9.js";const I={class:"flex min-h-full flex-1 flex-col justify-center px-6 py-12 lg:px-8"},L=e("div",{class:"sm:mx-auto sm:w-full sm:max-w-sm"},[e("img",{class:"mx-auto h-10 w-auto",src:"https://tailwindui.com/img/logos/mark.svg?color=indigo&shade=600",alt:"Your Company"}),e("h2",{class:"mt-10 text-center text-2xl font-bold leading-9 tracking-tight text-gray-900"}," Sign in to your account ")],-1),M={class:"mt-10 sm:mx-auto sm:w-full sm:max-w-sm"},$=["onSubmit"],z=e("label",{for:"userName",class:"block text-sm font-medium leading-6 text-gray-900"},"Tên đăng nhập",-1),E={class:"mt-2"},A={key:0,class:"text-red-500 text-xs font-semibold mt-1"},R=e("div",{class:"flex items-center justify-between"},[e("label",{for:"password",class:"block text-sm font-medium leading-6 text-gray-900"},"Mật khẩu ")],-1),U={class:"mt-2"},P={key:0,class:"text-red-500 text-xs font-semibold mt-1"},Y=e("button",{type:"submit",class:"flex w-full justify-center rounded-md bg-indigo-600 px-3 py-1.5 text-sm font-semibold leading-6 text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600"}," Đăng nhập ",-1),q={key:0,class:"w-full h-full flex justify-center items-center",style:{position:"fixed",top:"0",left:"0","z-index":"100"}},G={class:"flex justify-center items-center"},H=e("div",{class:"bg-gray-500",style:{position:"absolute",top:"0",left:"0",width:"100%",height:"100%",opacity:"0.3"}},null,-1),J={class:"spinner-border text-white",role:"status"},Z={__name:"Login",setup(K){const u=m(!1),d=C(),p=_(),t=m({userName:null,password:null}),o=m({userName:"",password:""});N(()=>{d.onResetStore()});const b=async()=>{let a=!1;if(t.value={},o.value.userName.trim()||(t.value.userName="Thông tin trống",a=!0),o.value.password.trim()||(t.value.password="Thông tin trống",a=!0),a)return;u.value=!0;const s=new FormData;s.append("username",o.value.userName),s.append("password",o.value.password),await f(!1,s),u.value=!1},f=async(a,s)=>{await D.post(F,s).then(r=>{a?d.role==1?p.push("/admin/home"):p.push("/admin/transactionList"):(d.onSetFullProperty(r.data.data),f(!0,s))}).catch(r=>{const n=r.response.data.message?r.response.data.message:"Lỗi";V(n,!0),console.error(n,r)})};function g(a){t.value[a]=null}return(a,s)=>{const r=k("Button");return l(),i(B,null,[e("div",I,[L,e("div",M,[e("form",{class:"space-y-6",onSubmit:S(b,["prevent"])},[e("div",null,[z,e("div",E,[v(e("input",{id:"userName",name:"text",type:"userName",autocomplete:"userName","onUpdate:modelValue":s[0]||(s[0]=n=>o.value.userName=n),class:h([{"border-2 border-red-500":t.value.userName},"block w-full rounded-md border-0 py-1.5 px-2 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"]),onInput:s[1]||(s[1]=n=>g("userName"))},null,34),[[x,o.value.userName]]),t.value.userName?(l(),i("div",A,w(`* ${t.value.userName}`),1)):c("",!0)])]),e("div",null,[R,e("div",U,[v(e("input",{id:"password",name:"password",type:"password",autocomplete:"current-password","onUpdate:modelValue":s[2]||(s[2]=n=>o.value.password=n),class:h([{"border-2 border-red-500":t.value.password},"block w-full rounded-md px-2 border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"]),onInput:s[3]||(s[3]=n=>g("password"))},null,34),[[x,o.value.password]]),t.value.password?(l(),i("div",P,w(`* ${t.value.password}`),1)):c("",!0)])]),e("div",null,[Y,y(r,{label:"Submit"})])],40,$)])]),u.value?(l(),i("div",q,[e("div",G,[H,e("div",J,[y(j(T),{color:"blue",size:"12",class:"lg:ml-64 mt-10"})])])])):c("",!0)],64)}}};export{Z as default};
